# local development overrides

version: '3.5'

services:
    # appserver:
    #     command: ['bin/start-dev']
    #     environment:
    #         - NEO4J_HOST=bolt://n4j-database:7687
    #         - NEO4J_USER=neo4j
    #         - FLASK_DEBUG=1
    #         - FLASK_APP_CONFIG=Development
    #     volumes:
    #         # dev mode only: to pick up edits done in host
    #         - ./appserver:/home/n4j
    database:
        environment:
            - NEO4J_AUTH=none
        volumes:
            - ./db/data:/data
            - ./db/logs:/logs
            - ./db/plugins:/plugins
    client:
        container_name: n4j-client
        # starts dev & moves the yarn.lock file so it can be committed
        command: yarn dev-start
        depends_on:
            - appserver
        volumes:
            # dev mode only: mount src dir for container to pick up edits done on host
            - ./client:/home/***ARANGO_USERNAME***/client
        ports:
            - "4200:4200"
        build: ./client
        networks:
            - frontend
        depends_on:
            - appserver
