#!/bin/bash

echo "Waiting for Neo4J"

NEO4J_STATUS="000"

until [ "$NEO4J_STATUS" = "200" ]
do
    NEO4J_STATUS=`curl -s -o /dev/null -I -w "%{http_code}" http://neo4j:7474/`
    echo "Status of Neo4J: $NEO4J_STATUS"
    sleep 2
done

# Run command | https://docs.docker.com/compose/startup-order/
>&2 echo "Neo4j started - executing command"
exec $@
