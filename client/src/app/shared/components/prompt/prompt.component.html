<div class="d-flex">
  <div ngbDropdown
       class="d-inline-block flex-grow-1"
       placement="bottom end"
       *ngIf="contextsController$ | async as controller"
  >
    <button class="btn btn-secondary w-100 text-truncate" ngbDropdownToggle
            [disabled]="!controller.entities.length">
      Context
      <ng-container *ngIf="controller.current$ | async as current">
        : {{ current }}
      </ng-container>
    </button>
    <div ngbDropdownMenu class="w-100">
      <button ngbDropdownItem class="text-truncate"
              (click)="controller.currentIdx$.next(-1)">Empty
      </button>
      <button ngbDropdownItem class="text-truncate"
              *ngFor="let context of controller.entities; let i = index"
              (click)="controller.currentIdx$.next(i)">{{ context }}</button>
    </div>
  </div>
  <div ngbDropdown class="d-inline-block flex-grow-0" placement="bottom-right">
    <button class="btn btn" ngbDropdownToggle>
      <i class="fas fa-cog fa-fw"></i>
    </button>
    <div ngbDropdownMenu class="w-100 p-4">
      <label>
        Temperature:
        <input
          class="w-100"
          ngbButton
          type="range"
          min="0"
          max="1"
          step="any"
          [ngModel]="tempertaure$ | async"
          (ngModelChange)="tempertaure$.next($event)"
        />
      </label>
    </div>
  </div>
  <button class="d-inline-block btn btn-sm flex-grow-0" (click)="openPlayground()">
      <i class="fas fa-flask"></i>
  </button>
</div>
<ng-content></ng-content>
<div
  class="mt-4 card"
  style="white-space: pre-line"
  *ngIf="possibleExplanation$ | async as possibleExplanation; else loading"
>
  <div class="card-body p-3 bg-light" style="white-space: pre-wrap">
    {{ possibleExplanation }}
  </div>
</div>
<ng-template #loading>
  <div class="mt-4">
    <i class="fa fa-spinner fa-spin"></i>
  </div>
</ng-template>
