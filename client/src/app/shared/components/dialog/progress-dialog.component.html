<div class="modal-header">
  <h4 class="modal-title text-truncate">
    {{title}}
  </h4>
</div>
<div class="modal-body">
  <ng-container *ngFor="let progressObservable of progressObservables">
    <div *ngIf="progressObservable | async as progress">
      <div class="mb-2">
        <ngb-progressbar *ngIf="progress.mode === 'DETERMINATE'"
                         type="primary" [value]="progress.value * 100" [striped]="false"
                         [animated]="false">
        </ngb-progressbar>
        <ngb-progressbar *ngIf="progress.mode !== 'DETERMINATE'"
                         type="primary" [value]="100" [striped]="true" [animated]="true">
        </ngb-progressbar>
      </div>

      <div class="mb-2">
        {{progress.status}}
      </div>

      <ng-container *ngIf="progress.warnings?.length">
        <div class="mb-2">
          <app-response-alert *ngIf="progress.warnings.length == 1; else multiple"
                              class="mt-1"
                              [responseAlert]="progress.warnings[0]"
          ></app-response-alert>
          <ng-template #multiple>
            <details>
              <summary>Warnings ({{progress.warnings.length}})</summary>
              <app-response-alert *ngFor="let warning of progress.warnings"
                                  class="mt-1"
                                  [responseAlert]="warning"
              ></app-response-alert>
            </details>
          </ng-template>
        </div>
      </ng-container>

      <ng-container *ngIf="progress.errors?.length">
        <div class="mb-2">
          <app-response-alert *ngIf="progress.errors.length == 1; else multiple"
                              class="mt-1"
                              [responseAlert]="progress.errors[0]"
          ></app-response-alert>
          <ng-template #multiple>
            <details>
              <summary>Errors ({{progress.errors.length}})</summary>
              <app-response-alert *ngFor="let error of progress.errors"
                                  class="mt-1"
                                  [responseAlert]="error"
              ></app-response-alert>
            </details>
          </ng-template>
        </div>
      </ng-container>
    </div>
  </ng-container>
</div>
<div *ngIf="cancellable || persist" class="modal-footer">
  <button *ngIf="cancellable" class="btn btn-secondary" type="button" (click)="cancel()">
    Cancel
  </button>

  <button *ngIf="persist" class="btn btn-secondary" type="button" (click)="cancel()">
    Close
  </button>
</div>
