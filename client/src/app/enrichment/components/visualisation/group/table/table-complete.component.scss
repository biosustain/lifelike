.legend-container {
  display: grid;
  grid-template-columns: 4ch 1fr;
  margin: 0;
}

.hidden-text {
  display: inline-block;
  height: 1px;
  overflow: hidden;
  width: 1px;
}

@mixin clamp($max-lines) {
  overflow: hidden;
  // oddly those prefixes are supported among all modern browsers
  display: -webkit-box;
  -webkit-line-clamp: $max-lines;
  -webkit-box-orient: vertical;
}

.table {
  margin-bottom: 0;

  thead {
    th {
      cursor: pointer;

      &[data-sort]:after {
        display: inline-block;
        font-family: "Font Awesome 5 Pro";
        margin-left: 0.3em;
      }

      &[data-sort="asc"]:after {
        content: "\f063";
      }

      &[data-sort="desc"]:after {
        content: "\f062";
      }
    }
  }

  tbody > tr {
    & > td > * {
      // clamp by height so no ellipsis is shown
      display: block;
      max-height: calc(1.5em * 15); // ~15 lines
      overflow: auto;

      // auto-scroll within cell to searched term
      overscroll-behavior-y: contain;
      scroll-snap-type: y mandatory;

      &::ng-deep > .ngb-highlight {
        display: inline-block;
        scroll-snap-align: center;
        scroll-snap-stop: always;
      }
    }

    // allow cell scrolling
    &:focus > td > *,
    &:focus-within > td > *,
    &:hover > td > * {
      scroll-snap-type: y proximity;
    }
  }

  .line-clamp > tr {
    & > td > * {
      $max-lines: 3;
      @include clamp($max-lines);
    }

    // stop clamping while focussed
    &:focus > td > *,
    &:focus-within > td > * {
      -webkit-line-clamp: unset;
      overflow: auto;
    }
  }

  .gene-list > * {
    display: inline;
  }
}
