<div #modalContainer class="position-relative h-100">
  <div
    class="position-absolute w-100 h-100 d-flex flex-column"
    style="z-index: 0; overflow: scroll"
  >
    <div class="module">
      <div class="module-header">
        <ng-container *ngIf="loadingData; else objectLoadedHeader">
          <!-- Breadcrumbs -->
          <div class="module-breadcrumb-bar mb-1">
            <ol class="breadcrumb">
              <li class="breadcrumb-item">
                <span class="placeholder-box">Loading loading</span>
              </li>
              <li class="breadcrumb-item">
                <span class="placeholder-box">Loading</span>
              </li>
              <li class="breadcrumb-item">
                <span class="placeholder-box">Loading load</span>
              </li>
            </ol>
          </div>

          <!-- Title bar -->
          <div class="d-flex flex-wrap align-items-center">
            <div class="module-title-bar mr-4">
              <h1 class="module-title text-truncate">
                <span class="placeholder-box">Loading loading loading</span>
              </h1>

              <div class="btn-group ml-2">
                <button class="btn btn-secondary" disabled>
                  Edit Parameters
                </button>
              </div>
            </div>

          </div>
        </ng-container>

        <ng-template #objectLoadedHeader>
          <!-- Breadcrumbs -->
          <div class="module-breadcrumb-bar mb-1">
            <app-object-path [object]="object.parent" [newTab]="true"></app-object-path>
          </div>

          <div class="d-flex flex-wrap align-items-center">
            <div class="module-title-bar mr-4">
              <h1 class="module-title text-truncate" draggable="true">
                {{ object.filename }}
              </h1>

              <div ngbDropdown class="d-inline-block ml-1" container="body">
                <a href="#" class="dropdown-no-arrow" ngbDropdownToggle
                   (click)="$event.preventDefault()">
                  <i class="fas fa-chevron-down fa-fw text-icon"></i>
                </a>
                <div ngbDropdownMenu>
                  <app-object-menu [object]="object" [forEditing]="true"
                                   [showOpen]="false" [showDelete]="false"
                                   [showRestore]="true"
                                   (objectUpdate)="emitModuleProperties()">
                  </app-object-menu>
                </div>
              </div>
              <div class="btn-group ml-2">
                <button class="btn btn-secondary"
                        [disabled]="!object.privileges.writable">
                  Edit Parameters
                </button>
              </div>
            </div>

          </div>
        </ng-template>

        <div class="text-warning mt-2" *ngIf="duplicateGenes">
          Duplicate gene names removed from table: {{ duplicateGenes }}
        </div>
      </div>

      <div *ngIf="!loadingData" class="module-body flex-fill overflow-auto space-cards" #moduleBody>

        <div class="card">

          <div class="card-header d-flex flex-wrap align-items-center">
            Table

            <ng-container *ngIf="!object || loadingData; else objectLoadedHeader">
              <div class="module-toolbar d-flex align-items-center ml-auto">
                <div class="ml-auto d-flex">
                  <div class="btn-group mr-2">
                    <button class="btn btn-secondary" disabled>
                      Column Order
                    </button>
                  </div>
                  <div class="btn-group">
                    <button class="btn btn-secondary" disabled>
                      Download CSV
                    </button>
                  </div>
                </div>
              </div>
            </ng-container>
            <ng-template #objectLoadedHeader>
              <div class="module-toolbar d-flex align-items-center ml-auto">
                <div class="ml-auto d-flex">
                  <div class="btn-group mr-2">
                    <button class="btn btn-secondary" >
                      Column Order
                    </button>
                  </div>
                  <div class="btn-group">
                    <button class="btn btn-secondary" >
                      Download CSV
                    </button>
                  </div>
                </div>
              </div>
            </ng-template>

          </div>
          <div
            class="card-body" style="overflow-x: scroll;">
            <app-enrichment-visualisation-table-viewer>

            </app-enrichment-visualisation-table-viewer>
          </div>


        </div>
        <div class="card">
          <div class="card-header">
            P-values
          </div>
          <app-enrichment-visualisation-chart-viewer
                     class="card-body"
                     style="display: block; width: 100%; height: 100%;"
                     [geneNames]="geneNames"
                     [organism]="organism"
                     >
<!--                     (chartClick)="chartClick($event)"-->
<!--                     (chartHover)="chartClick($event)"-->

          </app-enrichment-visualisation-chart-viewer>
        </div>

        <div class="card">
          <div class="card-header">
            Genes for {{ mockedData.data[selectedRow]["Term"] }}
          </div>
          <app-enrichment-visualisation-cloud-viewer
                     [geneNames]="geneNames"
                     [organism]="organism"
            class="card-body">
<!--            [data]="cloudData"-->
          </app-enrichment-visualisation-cloud-viewer>
        </div>
      </div>
    </div>
  </div>
</div>
