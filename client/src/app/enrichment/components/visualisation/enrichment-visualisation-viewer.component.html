<div #modalContainer class="position-relative h-100">
    <div
            class="position-absolute w-100 h-100 d-flex flex-column"
            style="z-index: 0; overflow: scroll"
    >
        <div class="module">
            <div class="module-header">
                <ng-container *ngIf="loadingData; else objectLoadedHeader">
                    <!-- Breadcrumbs -->
                    <div class="module-breadcrumb-bar mb-1">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item">
                                <span class="placeholder-box">Loading loading</span>
                            </li>
                            <li class="breadcrumb-item">
                                <span class="placeholder-box">Loading</span>
                            </li>
                            <li class="breadcrumb-item">
                                <span class="placeholder-box">Loading load</span>
                            </li>
                        </ol>
                    </div>

                    <!-- Title bar -->
                    <div class="d-flex flex-wrap align-items-center">
                        <div class="module-title-bar mr-4">
                            <h1 class="module-title text-truncate">
                                <span class="placeholder-box">Loading loading loading</span>
                            </h1>

                            <div class="btn-group ml-2">
                                <button class="btn btn-secondary" disabled>
                                    Edit Parameters
                                </button>
                            </div>
                        </div>

                    </div>
                </ng-container>

                <ng-template #objectLoadedHeader>
                    <!-- Breadcrumbs -->
                    <div class="module-breadcrumb-bar mb-1">
                        <app-object-path [object]="enrichmentService.object.parent" [newTab]="true"></app-object-path>
                    </div>

                    <div class="d-flex flex-wrap align-items-center">
                        <div class="module-title-bar mr-4">
                            <h1 class="module-title text-truncate" draggable="true">
                                {{ object.filename }}
                            </h1>

                            <div ngbDropdown class="d-inline-block ml-1" container="body">
                                <a href="#" class="dropdown-no-arrow" ngbDropdownToggle
                                   (click)="$event.preventDefault()">
                                    <i class="fas fa-chevron-down fa-fw text-icon"></i>
                                </a>
                                <div ngbDropdownMenu>
                                    <app-object-menu [object]="object" [forEditing]="true"
                                                     [showOpen]="false" [showDelete]="false"
                                                     [showRestore]="true"
                                                     (objectUpdate)="emitModuleProperties()">
                                    </app-object-menu>
                                </div>
                            </div>
                            <div class="btn-group ml-2">
                                <button class="btn btn-secondary"
                                        (click)="openEnrichmentVisualisationEditDialog()"
                                        [disabled]="!object.privileges.writable">
                                    Edit Parameters
                                </button>
                            </div>
                        </div>

                    </div>
                </ng-template>

                <div class="text-warning mt-2" *ngIf="duplicateGenes">
                    Duplicate gene names removed from table: {{ duplicateGenes }}
                </div>
            </div>

            <div *ngIf="!loadingData" class="module-body flex-fill overflow-auto space-cards" #moduleBody>

                <app-enrichment-visualisation-group
                        [title]="'Biological Process'"
                        [data]="g1"
                        [analysis]="chartAnalysis"
                        [geneNames]="geneNames"
                        [organism]="organism"
                >

                </app-enrichment-visualisation-group>

                <app-enrichment-visualisation-group
                        [title]="'MolecularFunction'"
                        [data]="g2"
                        [analysis]="chartAnalysis"
                        [geneNames]="geneNames"
                        [organism]="organism"
                >

                </app-enrichment-visualisation-group>

                <app-enrichment-visualisation-group
                        [title]="'Cellular Component'"
                        [data]="g3"
                        [analysis]="chartAnalysis"
                        [geneNames]="geneNames"
                        [organism]="organism"
                >

                </app-enrichment-visualisation-group>



                <div class="card">
                    <div class="card-header">
                        Genes importance by number of GO terms
                    </div>
                    <app-enrichment-visualisation-cloud-viewer
                            [analysis]="wordCloudAnalysis"
                            [geneNames]="geneNames"
                            [organism]="organism"
                            class="card-body">
                        <!--            [data]="cloudData"-->
                    </app-enrichment-visualisation-cloud-viewer>
                </div>
                <app-clustergram
                        [data]="g3"
                >

                </app-clustergram>
            </div>
        </div>
    </div>
</div>
