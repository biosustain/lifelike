<form class="d-flex flex-column justify-content-between">
    <fieldset class="fieldset-properties mt-2">
        <legend container="body"
                ngbTooltip="Click a checkbox to filter annotations of that type"
                placement="top left right">Link
            Details:
        </legend>
        <ngb-accordion ngbAccordion activeIds="l_desc">
            <ngb-panel id="l_desc" title="Description">
                <ng-template ngbPanelContent>
                    <p [innerHTML]="entity.description" [style.whiteSpace]="'pre-wrap'"></p>
                </ng-template>
            </ngb-panel>
            <ngb-panel *ngIf="!entity._multiple_values else multipleValues" [disabled]="true">
                <ng-template disabled="true" ngbPanelHeader>
                    <button class="btn btn-link w-100 d-flex align-items-center justify-content-between"
                            ngbPanelToggle>
                        <b>Value</b>
                        {{ parseProperty(entity._value) }}
                    </button>
                </ng-template>
            </ngb-panel>
            <ng-template #multipleValues>
                <ngb-panel title="Value">
                    <ng-template ngbPanelContent>
                        <ul class="list-group list-group-flush cancel-out-card-padding">
                            <li class="list-group-item d-flex flex-wrap justify-content-between">
                                <b>Source value</b>
                                {{ parseProperty(entity._multiple_values[0]) }}
                            </li>
                            <li class="list-group-item d-flex flex-wrap justify-content-between">
                                <b>Target value</b>
                                {{ parseProperty(entity._multiple_values[1]) }}
                            </li>
                        </ul>
                    </ng-template>
                </ngb-panel>
            </ng-template>
            <ngb-panel *ngIf="entity._trace" cardClass="filled-card" title="Trace">
                <ng-template ngbPanelContent>
                    <ul class="list-group list-group-flush cancel-out-card-padding">
                        <li class="list-group-item d-flex flex-wrap justify-content-between">
                            <b>Source</b>
                            {{ getNodeById(entity._trace.source).description }}
                        </li>
                        <li class="list-group-item d-flex flex-wrap justify-content-between">
                            <b>Target</b>
                            {{ getNodeById(entity._trace.target).description }}
                        </li>
                        <li class="list-group-item d-flex flex-wrap justify-content-between">
                            <b>Group</b>
                            {{ entity._trace.group }}
                        </li>
                        <li class="list-group-item" *ngIf="entity._trace.detail_edges">
                            <button (click)="gotoDynamic(entity._trace)" class="btn btn-outline-primary">
                                Show detailed network
                            </button>
                        </li>
                    </ul>
                </ng-template>
            </ngb-panel>
            <ngb-panel cardClass="filled-card" title="Properties">
                <ng-template ngbPanelContent>
                    <ul class="list-group list-group-flush cancel-out-card-padding">
                        <li *ngFor="let property of options.linkValueAccessors"
                            [ngClass]="{
                                'list-group-item': true,
                                 'd-flex': true,
                                 'flex-wrap': true,
                                 'justify-content-between': true,
                                active: property === options.selectedLinkValueAccessor
                              }"
                        ><b>{{ property.description }}</b>{{parseProperty(entity[property.description])}}
                        </li>
                        <li *ngIf="entity._folded"
                            class="list-group-item d-flex justify-content-between"
                        >
                            <b>Folded</b>
                            True
                        </li>
                    </ul>
                </ng-template>
            </ngb-panel>
            <ngb-panel title="RAW link content">
                <ng-template ngbPanelContent>
                    <pre [style.marginBottom]="0">{{ getJSONDetails(entity) }}</pre>
                    <small>This view contains reduced object representation. Nested objects has been mapped to
                        their ids or indexes (if available); <s>shown arrays contains only top 3 rows;</s>
                        numbers
                        has been
                        limited to 6 digits after comma.</small>
                </ng-template>
            </ngb-panel>
        </ngb-accordion>
    </fieldset>
</form>
