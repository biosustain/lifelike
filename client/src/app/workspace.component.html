<div *ngIf="(workspaceManager.panes$ | async) as panes" class="h-100 w-100 d-flex overflow-hidden">
  <div class="flex-fill">
    <as-split unit="percent" direction="horizontal" [gutterSize]="5" cdkDropListGroup>
      <as-split-area [size]="100 / panes.length" *ngFor="let pane of panes">
        <div class="h-100 d-flex flex-column">
          <div class="nav-workspace-tabs">
            <div class="nav flex-fill" cdkDropList cdkDropListOrientation="horizontal"
                 (cdkDropListDropped)="tabDropped($event)"
                 [cdkDropListData]="pane">
              <div class="nav-item d-flex" *ngFor="let tab of pane.tabs; index as i" cdkDrag>
                <div class="nav-link d-flex" [class.active]="pane.activeTab === tab"
                     (click)="handleTabClick($event, pane, tab); $event.preventDefault()">
                  <div class="d-block d-flex align-items-center">
                    <span class="tab-title d-block text-truncate">
                      <i [class]="'fa fa-fw fa-' + (tab.fontAwesomeIcon || 'window-maximize')"></i>
                      {{tab.title}}
                    </span>
                    <span class="badge badge-danger badge-pill ml-1" *ngIf="tab.badge != null && tab.badge !== '*'">
                      {{tab.badge}}
                    </span>
                    <span class="badge badge-danger badge-pill ml-1" *ngIf="tab.badge === '*'">
                      <i class="fa fa-asterisk"></i>
                    </span>
                  </div>
                  <a href="#" (click)="closeTab(pane, tab); $event.preventDefault()" class="ml-2 text-muted">
                    <i class="fa fa-fw fa-times"></i>
                  </a>
                </div>
              </div>
            </div>
            <div class="ml-auto mr-2 align-self-center">
              <button class="btn btn-primary btn-sm" type="button" (click)="addTab(pane)"
                      ngbTooltip="Create new tab">
                <i class="fa fa-fw fa-plus"></i>
              </button>
            </div>
          </div>

          <div class="d-flex flex-fill overflow-hidden w-100 h-100 tab-content-container">
            <div *ngFor="let tab of pane.tabs; index as i"
                 class="flex-fill overflow-hidden position-absolute tab-content-inner-container"
                 [class.hidden-tab-content]="pane.activeTab !== tab">
              <app-workspace-outlet [name]="pane.id" [container]="tab.container"
                                    (outletFocus)="setFocus(pane)"></app-workspace-outlet>
            </div>
          </div>
        </div>
      </as-split-area>
    </as-split>
  </div>
  <div *ngIf="canAddPane()" class="split-pane-placeholder" (click)="addPane()"
       ngbTooltip="Split this space into two columns" placement="left-top">
    <div class="split-pane-arrow">
      <i class="fa fa-fw fa-arrow-left"></i>
    </div>
  </div>
</div>
