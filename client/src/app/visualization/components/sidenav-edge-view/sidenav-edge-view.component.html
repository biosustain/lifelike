<div *ngIf="edgeEntity.data && legend">
  <app-node-relationship
    [leftNodeName]="edgeEntity.data.from.displayName"
    [leftNodeLabel]="edgeEntity.data.from.primaryLabel"
    [leftNodeColor]="legend.get(this.edgeEntity.data.from.primaryLabel)[0]"
    [rightNodeColor]="legend.get(this.edgeEntity.data.to.primaryLabel)[0]"
    [rightNodeName]="edgeEntity.data.to.displayName"
    [rightNodeLabel]="edgeEntity.data.to.primaryLabel"
    [edge]="edgeEntity.data.association"
  ></app-node-relationship>

  <div id="association-snippet-container" *ngIf="edgeEntity.data.snippets.length > 0; else noSnippets">
    <mat-expansion-panel class="association-snippet-panel" *ngFor="let snippet of edgeEntity.data.snippets">
      <mat-expansion-panel-header [collapsedHeight]="'80px'" [expandedHeight]="'80px'">
        <mat-panel-title class="association-snippet-title">{{ snippet.publication.data.title }}</mat-panel-title>
        <mat-panel-description class="association-snippet-pub-data">
          <i>{{ snippet.publication.data.journal }} ({{ snippet.publication.data.pubYear }})</i>
        </mat-panel-description>
      </mat-expansion-panel-header>

      <div fxLayout="column" fxLayoutAlign="space-between start">
        <app-highlight-snippet
          [snippet]="snippet.reference.data.sentence"
          [entry1Text]="snippet.reference.data.entry1Text"
          [entry2Text]="snippet.reference.data.entry2Text"
          [entry1Colors]="legend.get(this.edgeEntity.data.from.primaryLabel)"
          [entry2Colors]="legend.get(this.edgeEntity.data.to.primaryLabel)"
        ></app-highlight-snippet>
        <div fxLayout="row" fxLayoutAlign="space-between center">
          <strong>PubMed ID: </strong>
          <a class="pubmed-link" fxLayout="row" fxLayoutAlign="space-between center" [href]="'https://pubmed.ncbi.nlm.nih.gov/' + snippet.publication.data.pmid + '/'" target="_blank">
            <div>{{ snippet.publication.data.pmid }}</div>
            <mat-icon>launch</mat-icon>
          </a>
        </div>
      </div>

    </mat-expansion-panel>
  </div>
  <ng-template #noSnippets>No Association Snippets Found!</ng-template>
</div>
