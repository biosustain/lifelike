<div class="d-flex flex-column position-relative h-100" *ngIf="(loadTask.status$ | async) as status">
  <app-module-progress *ngIf="status.running" class="position-absolute w-100 h-100 bg-white p-4"
                       style="z-index: 2">
    <div>Retrieving file data...</div>
  </app-module-progress>

  <app-module-error *ngIf="status.failedErrorShown" class="position-absolute w-100 h-100 bg-white p-4"
                    [error]="status.error" style="z-index: 2">
    <a appLink="/projects">Go to Projects <i class="fa fa-fw fa-arrow-right"></i></a>
  </app-module-error>

  <div *ngIf="status.resultsShown" class="position-absolute w-100 h-100 d-flex flex-column" style="z-index: 0">
    <div class="module" appContainerBreakpoints>
      <!-- Header -->
      <div class="module-header">
        <!-- Breadcrumbs -->
        <div class="module-breadcrumb-bar mb-1">
          <app-object-path [object]="object" [newTab]="true"></app-object-path>
        </div>

        <!-- Title bar -->
        <div class="module-titlebar">
          <h1 class="module-title">
            <ng-container *ngIf="object.isDirectory && !object.parent">
              File Navigator (Entire Project)
            </ng-container>
            <ng-container *ngIf="object.isDirectory && object.parent">
              File Navigator (Folder Contents)
            </ng-container>
            <ng-container *ngIf="!object.isDirectory">
              File Navigator
            </ng-container>
          </h1>
        </div>
      </div>

      <!-- Body -->
      <div class="module-body" *ngIf="object.isFile" [class.border-bottom]="object.hasWordCloud">
        <app-associated-maps [object]="object"></app-associated-maps>
      </div>

      <div class="module-body flex-fill" *ngIf="object.hasWordCloud" style="height: 100%">
        <app-word-cloud [object]="object" [clickableWords]="clickableWords"
                        (wordOpen)="openWord($event)"></app-word-cloud>
      </div>
      
      <div class="module-body border-top">
        <div class="module-section">
          <div class="module-section-header">
            <h2 class="module-section-header-title">Annotation History</h2>
          </div>

          <div class="module-section-body">
            <app-file-annotation-history [object]="object" [limit]="10"></app-file-annotation-history>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
