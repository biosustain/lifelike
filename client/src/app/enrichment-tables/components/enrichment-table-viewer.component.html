<div class="position-relative h-100" #modalContainer>
  <div
    class="position-absolute w-100 h-100 d-flex flex-column"
    style="z-index: 0; overflow: scroll"
    (scroll)="onTableScroll($event)"
    [scrollTop]="scrollTopAmount"
  >
    <div class="module">
      <div class="module-header">
        <!-- Breadcrumbs -->
        <div class="module-breadcrumb-bar mb-1" *ngIf="object">
          <app-object-path [object]="object.parent" [newTab]="true"></app-object-path>
        </div>

        <div class="d-flex flex-wrap align-items-center">
          <div class="module-title-bar mr-4" *ngIf="object">
            <h1 class="module-title text-truncate" draggable="true"
                (dragstart)="this.dragStarted($event)">
              {{ object.filename }}
            </h1>

            <div ngbDropdown class="d-inline-block ml-1" container="body">
              <a href="#" class="dropdown-no-arrow" ngbDropdownToggle
                 (click)="$event.preventDefault()">
                <i class="fas fa-chevron-down fa-fw text-icon"></i>
              </a>
              <div ngbDropdownMenu>
                <app-object-menu [object]="object" [forEditing]="true"
                                 [showOpen]="false" [showDelete]="false"
                                 [showRestore]="true"
                                 (objectUpdate)="emitModuleProperties()">
                </app-object-menu>
              </div>
            </div>
            <div class="btn-group ml-2">
              <button class="btn btn-secondary" (click)="openEnrichmentTableEditDialog()">
                Edit Parameters
              </button>
            </div>
          </div>

          <div class="module-toolbar d-flex align-items-center ml-auto">
            <div class="ml-auto d-flex">
              <div class="btn-group mr-2">
                <button class="btn btn-secondary" (click)="openOrderDialog()">
                  Column Order
                </button>
              </div>
              <div class="btn-group">
                <button class="btn btn-secondary" (click)="downloadAsCSV()">
                  Download CSV
                </button>
              </div>
            </div>
          </div>
        </div>

        <div class="text-warning mt-2" *ngIf="duplicateGenes">
          Duplicate gene names removed from table: {{ duplicateGenes }}
        </div>
      </div>

      <div *ngIf="tableEntries" class="module-body" #moduleBody>
        <button class="btn btn-secondary fixed" (click)="scrollTop()">
          Return to Top of Page
        </button>
        <app-generic-table [header]="tableHeader" [entries]="tableEntries">
        </app-generic-table>
        <div style="font-size: 30px; text-align: center; padding: 1em" *ngIf="loadingData">
          <span>
            <i class="fa fa-spinner fa-spin" style="margin-right: 2px;"></i>
            Currently Loading Data...
          </span>
        </div>
        <div class="col-12 justify-content-center">
        </div>
      </div>

    </div>
  </div>
</div>
