<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <h6 class="mb-4"><strong>Input data</strong></h6>
  <div class="form-group d-flex justify-content-between flex-wrap align-items-start">
    <label>Entities</label>
    <app-entities-control [formControl]="form.get('entities')"></app-entities-control>
  </div>
  <div class="form-group">
    <label>Context</label>
    <div
      ngbDropdown
      class="input-group input-border rounded"
      placement="bottom-left"
      *ngIf="form.controls.context as contextControl"
    >
      <input
        #contextDropdown="uid"
        appUid
        autocomplete="off"
        class="form-control border-0"
        type="text"
        ngbDropdownToggle
        [formControl]="contextControl"
        appAutoGrow
      />

      <div ngbDropdownMenu [attr.aria-labelledby]="contextDropdown" class="w-100">
        <ng-container *ngFor="let context of contexts">
          <button
            class="dropdown-item"
            type="button"
            placement="right"
            (click)="contextControl.setValue(context)"
          >
            <ngb-highlight [result]="context" [term]="contextControl.value"></ngb-highlight>
          </button>
        </ng-container>
      </div>
    </div>
  </div>
  <details>
    <summary><label>Template</label></summary>
    <code style="white-space: pre-wrap; display: block;">
      {{ TEMPLATE }}
    </code>
  </details>
  <button class="btn btn-primary" type="submit">Compose prompt</button>
</form>
