<div class='w-100'>
    <div class='nav-bar'>
        <mat-icon (click)='changeSize()' class='fr'>menu</mat-icon>
    </div>

    <form
        *ngIf='graphData.id!==""'
        class='w-90 center'
        [formGroup]='entityForm'>

        <mat-form-field class="w-100 mt3">
            <mat-label>Name</mat-label>
            <input
                matInput
                (keydown.enter)="blurInput($event)"
                formControlName='label'>
        </mat-form-field>

        <mat-form-field
            *ngIf='isNode'
            class='w-100'>
            <mat-label>Type</mat-label>
            <mat-select
                formControlName='group'>
                <mat-option
                    *ngFor="let type of nodeTemplates"
                    [value]='type.label'>
                    {{type.label | nodeTextStyle}}
                </mat-option>
            </mat-select>
        </mat-form-field>

        <!-- TODO - setter and getter for subtype options -->
        <mat-form-field
            *ngIf='isNode && subtypes.length'
            class='w-100'>
            <mat-label>SubType</mat-label>
            <mat-select
                formControlName='subtype'>
                <mat-option
                    *ngFor="let sT of subtypes"
                    [value]='sT'>
                    {{sT}}
                </mat-option>
            </mat-select>
        </mat-form-field>

        <mat-form-field
            *ngIf='isNode'
            class="w-100 mt3">
            <mat-label>Detail</mat-label>
            <textarea
                id='textArea'
                matInput
                cdkTextareaAutosize
                #autosize="cdkTextareaAutosize"
                (keydown.enter)="blurInput($event)"
                formControlName='detail'>
            </textarea>
        </mat-form-field>

        <!-- TODO - refactor to hyperlinks -->
        <div id='hyperlinks-menu' fxLayout='row wrap' fxLayoutAlign='center center'>
            <h4 class='blue dib'>Hyperlinks</h4>
            <button mat-icon-button disabled aria-label="Example icon button with a open in new tab icon">
                <mat-icon (click)='addHyperlink()'>add</mat-icon>
            </button>
        </div>
        <div formArrayName='hyperlinks' *ngFor='let h of hyperlinksForm.controls; let i = index;' class='db flex'>
            <div class='w-100' [formGroupName]='i'>
                <mat-form-field
                    appearance="outline"
                    *ngIf='isNode'
                    class="w-100">
                    <mat-icon class='link' (click)='goToLink()' matPrefix>link</mat-icon>
                    <input
                        matInput
                        (keydown.enter)="blurInput($event)"
                        formControlName='url'>
                    <mat-icon class='delete' matSuffix>delete</mat-icon>
                </mat-form-field>
            </div>
        </div>

        <app-search-links
            [graphData]='graphData'>
        </app-search-links>

        <button *ngIf='graphData?.data?.source' mat-button color="primary" (click)='goToSource()'>
            Source
        </button>

        <button (click)='delete()' mat-button color="warn" class='delete'>
            Delete
        </button>

    </form>
</div>