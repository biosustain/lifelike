<div class='w-100'>
    <div class='nav-bar'>
        <mat-icon (click)='changeSize()' class='fr'>menu</mat-icon>
    </div>
    <form 
        *ngIf='graph_data.id!==""'
        class='w-90 center'
        [formGroup]='entity_form'>
        
        <mat-form-field class="w-100 mt3">
            <mat-label>Label</mat-label>
            <input 
                matInput
                (keydown.enter)="blurInput($event)"
                formControlName='label'>
        </mat-form-field>

        <mat-form-field 
            *ngIf='isNode'
            class='w-100'>
            <mat-label>Type</mat-label>
            <mat-select
                formControlName='group'>
                <mat-option
                    *ngFor="let type of nodeTemplates"
                    [value]='type.label'>
                    {{type.label | titlecase}}
                </mat-option>
            </mat-select>
        </mat-form-field>
        
        <div 
            *ngIf='isNode'
            class='flex' style="flex-wrap: wrap;">
            <p class='blue'>Edges</p>
            <button 
                (click)='addEdge()'
                mat-button color="primary" 
                style="margin-left: auto;">
                Add Edge
            </button> 
            <p
                *ngIf='!edges'
                class='silver w-100 tc mv3'>
                No edges ...
            </p>
        </div>

        <div *ngIf='isNode'>
            <div 
                formArrayName='edges'
                *ngFor="let edge of edgeFormArr.controls; let i = index;"
                class='db flex mb3'
                style="font-size: 14px;">
                <div
                    [formGroupName]='i'
                    class='w-70 fl'>
                    <mat-form-field appearance='outline' class="w-100 mt3">
                        <mat-label>Label</mat-label>
                        <input
                            (keydown.enter)="blurInput($event)"
                            matInput
                            placeholder="Label"
                            formControlName='label'>
                    </mat-form-field>
                    <mat-form-field appearance='outline' class='w-100'>
                        <mat-label>Connected To</mat-label>
                        <mat-select
                            formControlName='to'>
                            <mat-option
                                *ngFor="let n of node_bank"
                                [value]='n.id'>
                                {{n.label | titlecase}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div class='w-30 fl flex flex-column justify-center pointer'>
                    <mat-icon (click)='deleteEdge(edge, i)' color='warn' style='margin: 0 auto; display: block;'>delete</mat-icon>
                    <p class='tc red' style='font-size: 12px;'>Delete</p>
                </div>
            </div>
        </div>

        <mat-divider *ngIf='isNode'></mat-divider>

        <mat-form-field 
            *ngIf='isNode'
            class="w-100 mt3">
            <mat-label>Hyperlink</mat-label>
            <input 
                matInput
                (keydown.enter)="blurInput($event)"
                formControlName='hyperlink'>
            <mat-icon (click)='goToLink("https://www.who.int")' matSuffix>link</mat-icon>
        </mat-form-field>

        <button (click)='delete()' mat-button color="warn" class='delete'>
            Delete
        </button>

    </form>
</div>