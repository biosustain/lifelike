<div id='map-channel' fxFlex fxLayout class='w-100 vh-100'>
  <!-- Map List -->
  <div id='map-list-container' class='h-100' fxFlex="30">
    <app-map-list
      childMode='true'
      [projects]='projects'
      [publicProjects]='publicProjects'
      (projectAPICaller)='handleAPI($event)'>
    </app-map-list>
    <button 
      mat-fab
      color='primary'
      id='add-project'
      aria-label="Example icon-button with a heart icon"
      (click)='createProject()'>
      <mat-icon>add</mat-icon>
    </button>
  </div>
  <div class='h-100' fxFlex="70" fxLayout='column' fxLayoutAlign="start center">
    <!-- Map Preview Panel -->
    <div class='bg-green' fxFill fxFlex="70" fxLayoutAlign="center center">
      <div
        fxFill
        *ngIf='selectedProject else empty;'
        id='map-preview'>
        <div 
          id='canvas-container'>
          <app-map-preview
            [project]='selectedProject'>
          </app-map-preview>
        </div>
      </div>
    </div>
    <!-- Map Meta Panel -->
    <div fxFill fxFlex="30" fxLayout='row'>
      <!-- Meta Info -->
      <div fxFill fxFlex="50" fxLayout='column' fxLayoutAlign="start center">
        <h2>{{selectedProject?.label}}</h2>
        <p class='author'>
          By {{selectedProject?.author}}
        </p>
        <p class='date'>
          Modified {{selectedProject?.date_modified | friendlyDateStr}}
        </p>
        <p class='description'>
          {{selectedProject?.description}}
        </p>
      </div>
      <!-- Actions -->
      <div fxFill fxFlex="50" fxLayout='column' fxLayoutAlign="center center">
        <div *ngIf='isItMine'>
          <button
            mat-raised-button
            color="primary"
            (click)='goToProject()'>
            EDIT
          </button>
          <button
            mat-raised-button
            [color]="selectedProject?.public === false ? 'primary' : 'accent'"
            (click)='togglePublic()'>
            {{selectedProject?.public === false ? 'MAKE PUBLIC' : 'MAKE PRIVATE'}}
          </button>
          <button
            mat-raised-button
            color="warn"
            (click)='deleteProject()'>
            DELETE
          </button>
        </div>
        <div *ngIf='!isItMine'>
          <button
            mat-raised-button
            color="primary"
            (click)='copyProject()'>
            MAKE COPY OF
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

  <!-- Empty Scene -->
<ng-template #empty>
  <div fxFill fxLayoutAlign="center center" id='map-preview' class='empty'>
    <p>Create or select a project</p>
  </div>
</ng-template>
  