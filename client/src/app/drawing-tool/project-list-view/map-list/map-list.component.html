<div [ngClass]='{"childless": !childMode}' id='map-list'>
  <h1>Maps</h1>
  <mat-tab-group [selectedIndex]="displayIndex" (selectedTabChange)="toggleView($event)">
    <mat-tab label="Personal">
      <div cdkDropList>
        <div class='map-template map shadow' *ngFor='let project of projects' [id]='project.hash_id'
          (contextmenu)="open($event, project)" (click)='clickHandler("pick", project)' cdkDrag
          [cdkDragDisabled]='childMode'>
          <h3>
            {{
              project.label | truncate:['40']
            }}
          </h3>
          <p class='author'>
            By {{project?.author}}
          </p>
          <p class='date'>
            Modified {{project?.date_modified | friendlyDateStr}}
          </p>
        </div>
      </div>
    </mat-tab>
    <mat-tab label="Community">
      <div cdkDropList>
        <div [id]='project.hash_id' class='map-template map shadow' *ngFor='let project of publicProjects'
          (contextmenu)="open($event, project)" (click)='clickHandler("pick", project)' cdkDrag
          [cdkDragDisabled]='childMode'>
          <h3>
            {{
              project.label | truncate:['40']
            }}
          </h3>
          <p class='author'>
            By {{project?.author}}
          </p>
          <p class='date'>
            Modified {{project?.date_modified | friendlyDateStr}}
          </p>
        </div>
      </div>
    </mat-tab>
  </mat-tab-group>
</div>
<!-- Context Menu -->
<ng-template #projectMenu let-project>
  <section (contextmenu)="$event.preventDefault()" class="project-menu">
    <div (click)='contextHandler("copy", project)'>Make copy of</div>
    <div *ngIf='displayMode==="personal"' (click)='contextHandler("delete", project)'>Delete</div>
  </section>
</ng-template>
