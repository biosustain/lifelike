<div
  fxLayout="column"
  fxLayoutGap="30px"
>
  <div>
    <div>Preview of Uploaded Worksheet</div>
    <mat-table [dataSource]="chosenSheetToMap?.sheetPreview">
      <mat-header-row *matHeaderRowDef="columnsForFilePreview"></mat-header-row>
      <mat-row *matRowDef="let row; let i=index; columns: columnsForFilePreview;" [attr.id]="'file-preview-row-'+i"></mat-row>

      <ng-container *ngFor="let col of columnsForFilePreview" [matColumnDef]="col">
        <mat-header-cell *matHeaderCellDef>{{ col }}</mat-header-cell>
        <mat-cell *matCellDef="let i=index;">{{ chosenSheetToMap?.sheetPreview[i][col] }}</mat-cell>
      </ng-container>
    </mat-table>
  </div>

  <div>
    <div>Add Relationship Mapping</div>
    <div>
      <button
        mat-stroked-button
        type="button"
        color="accent"
        (click)="addRelationshipMappingRow()"
      >Add Relationship Mapping Row</button>
    </div>
  </div>

  <div [formGroup]="relationshipMappingForm">
    <div formArrayName="relationshipMapping">
      <div *ngFor="let row of relationshipMappingForm.get('relationshipMapping').controls; let i=index">
        <div [formGroupName]="i">
          <app-import-column-relationship-mapping-row
            [columnHeaders]="chosenSheetToMap?.sheetColumnNames"
            [relationshipMappingForm]="relationshipMappingForm.get('relationshipMapping').controls[i]"
            (deleteMapping)="deleteRelationshipMappingRow(i)"
          ></app-import-column-relationship-mapping-row>
        </div>
      </div>
    </div>
  </div>

  <div>
    <button
      mat-stroked-button
      type="button"
      (click)="createRelationshipMapping()"
    >Upload</button>
  </div>
</div>









<!-- 









<div
  fxLayout="column"
  fxLayoutGap="30px"
>
  <div [formGroup]="columnMappingForm">
    <mat-table [dataSource]="chosenSheetToMap?.sheetColumnNames" formArrayName="columnMapping">
      <mat-header-row *matHeaderRowDef="columns"></mat-header-row>
      <mat-row *matRowDef="let row; let i=index; columns: columns;" [attr.id]="'file-column-name-row-'+i"></mat-row>

      <ng-container matColumnDef="columnName">
        <mat-header-cell *matHeaderCellDef>Column Name</mat-header-cell>
        <mat-cell *matCellDef="let object; let i=index;">{{ (object | keyvalue)[0].key }}</mat-cell>
      </ng-container>

      <ng-container matColumnDef="mappedNodeType">
        <mat-header-cell *matHeaderCellDef>Mapped Node Type</mat-header-cell>
        <mat-cell *matCellDef="let data; let i=index;" [formGroupName]="i">
          <mat-form-field>
            <mat-select
              placeholder="Select node type"
              formControlName="mappedNodeType"
              (selectionChange)="selectionChange($event)"
            >
              <mat-option
                *ngFor="let label of (dbNodeTypes$ | async)"
                [value]="label"
              >{{ label }}</mat-option>
            </mat-select>
          </mat-form-field>
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="mappedNodeProperty">
        <mat-header-cell *matHeaderCellDef>Mapped Node Property</mat-header-cell>
        <mat-cell *matCellDef="let data; let i=index;" [formGroupName]="i">
          <mat-form-field>
            <mat-select
              placeholder="Select node property"
              formControlName="mappedNodeProperty"
            >
              <span *ngIf="(dbNodeProperties$ | async)">
                <mat-option
                  *ngFor="let label of (dbNodeProperties$ | async)[columnMappingForm.get(
                    'columnMapping').controls[i].get('mappedNodeType').value]"
                  [value]="label"
                >{{ label }}</mat-option>
              </span>
            </mat-select>
          </mat-form-field>
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="edge">
        <mat-header-cell *matHeaderCellDef>Edge</mat-header-cell>
        <mat-cell *matCellDef="let object; let i=index" [formGroupName]="i">
          <mat-checkbox
            formControlName="edge"
            (change)="updateColumnMapping($event, columnType.EDGE, i)"></mat-checkbox>
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="source">
        <mat-header-cell *matHeaderCellDef>Source</mat-header-cell>
        <mat-cell *matCellDef="let object; let i=index" [formGroupName]="i">
          <mat-checkbox
            formControlName="source"
            (change)="updateColumnMapping($event, columnType.SOURCE, i)"></mat-checkbox>
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="target">
        <mat-header-cell *matHeaderCellDef>Target</mat-header-cell>
        <mat-cell *matCellDef="let object; let i=index" [formGroupName]="i">
          <mat-checkbox
            formControlName="target"
            (change)="updateColumnMapping($event, columnType.TARGET, i)"></mat-checkbox>
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="edgeProperty">
        <mat-header-cell *matHeaderCellDef>Edge Property</mat-header-cell>
        <mat-cell *matCellDef="let object; let i=index" [formGroupName]="i">
          <mat-checkbox
            formControlName="edgeProperty"
            (change)="updateColumnMapping($event, columnType.NODE_PROPERTY, i)"></mat-checkbox>
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="exclude">
        <mat-header-cell *matHeaderCellDef>Exclude</mat-header-cell>
        <mat-cell *matCellDef="let object; let i=index" [formGroupName]="i">
          <mat-checkbox
            formControlName="exclude"
            (change)="updateColumnMapping($event, columnType.EXCLUDE, i)"></mat-checkbox>
        </mat-cell>
      </ng-container>
    </mat-table>
  </div>

  <div>
    <button
      mat-stroked-button
      type="button"
      (click)="createColumnMapping()"
    >Save</button>
  </div>
</div> -->
