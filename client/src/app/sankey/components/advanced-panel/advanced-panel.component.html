<form [formGroup]="form">
  <div *ngIf="maximumShortestPathPlusN$ | async as maximumShortestPathPlusN">
    <label class="w-100 text-left m-0" ngbButtonLabel>
      <div [style.column-gap.rem]="1" class="d-flex align-items-baseline flex-wrap w-100">
        <label [style.max-width.%]="100" class="my-0 flex-shrink-0" for="shortestPathPlusN">
          Visible shortest path plus
        </label>
        <span class="flex-grow-1">
          <input
            [max]="maximumShortestPathPlusN | async"
            [style.min-width.%]="100"
            appAutoGrow
            class="form-control"
            formControlName="shortestPathPlusN"
            id="shortestPathPlusN"
            min="0"
            ngbButton
            step="1"
            type="number"
          />
          <div
            *ngIf="
              form.get('shortestPathPlusN').hasError('step') ||
              form.get('shortestPathPlusN').hasError('min')
            "
            class="invalid-feedback d-block"
          >
            This filed accepts only positive integers.
          </div>
          <div
            *ngIf="form.get('shortestPathPlusN').hasError('max')"
            class="invalid-feedback d-block"
          >
            There is only shortest path plus {{ form.get("shortestPathPlusN").getError("max").max }}
            defined in file, please select number within avaliable range.
          </div>
        </span>
      </div>
    </label>
  </div>
  <div>
    <div formControlName="alignId" ngbRadioGroup title="Align">
      <div class="mb-1">Align:</div>
      <label
        *ngFor="let align of aligns$ | async | keyvalue"
        [title]="align.value.description"
        class="mb-0"
        ngbButtonLabel
      >
        <input [value]="align.key" ngbButton type="radio" /> {{ align.value.name }}
      </label>
    </div>
  </div>
  <div>
    <label ngbButtonLabel>
      <input formControlName="normalizeLinks" ngbButton type="checkbox" />
      Normalize links
    </label>
  </div>
  <div class="form-group">
    <label class="w-100 text-left m-0 scrollbar-with-value" ngbButtonLabel>
      <div class="d-flex align-items-center mx-0">
        <label [for]="fontSize.uid" class="my-0 mr-2" container="body" ngbTooltip="Font size">
          Font Size
        </label>
        <app-percent-input
          #fontSize="uid"
          [max]="1000"
          [min]="20"
          [step]="20"
          appAutoGrow
          appUid
          formControlName="fontSizeScale"
        ></app-percent-input>
      </div>
    </label>
    <label
      class="w-100 text-left m-0 scrollbar-with-value"
      formGroupName="labelEllipsis"
      ngbButtonLabel
    >
      <input
        (change)="disableGroup($event.target.checked, 'labelEllipsis')"
        formControlName="enabled"
        ngbButton
        type="checkbox"
      />
      Max shown label characters
      <input
        [max]="maximumLabelLength$ | async"
        formControlName="value"
        min="0"
        ngbButton
        type="range"
      />
      {{ form.get("labelEllipsis.value").value }}
    </label>
  </div>
</form>
